{% extends 'base.html' %}

{% block head %}
    <title>Recipe planner</title>
{% endblock %}

{% block body %}
    <form method="post">
        {{ form.hidden_tag() }}
        <div>
            {{ form.input_text.label }}<br>
            {{ form.input_text() }}
        </div>
        {{ form.submit() }}
        
        <input type="hidden" id="selectedRecipe" name="selectedRecipe">
        <input type="hidden" id="selectedNumber" name="selectedNumber">

        <table>
            <tr>
                <th>NAME</th>
            </tr>
            {% for recipe in recipes %}
                <tr>
                    <td>{{ recipe.NAME }}</td>
                    <td><button type="button" onclick="alertValue(this)">1</button></td>
                    <td><button type="button" onclick="alertValue(this)">2</button></td>
                    <td><button type="button" onclick="alertValue(this)">3</button></td>
                    <td><button type="button" onclick="alertValue(this)">4</button></td>
                    <td><button type="button" onclick="alertValue(this)">5</button></td>
                    <td><button type="button" onclick="alertValue(this)">6</button></td>
                </tr>
            {% endfor %}
        </table>
    </form>

    <script>
        function alertValue(button) {
            let recipeName = button.parentElement.parentElement.firstElementChild.textContent;
            let numberCount = button.textContent;
            console.log("Button clicked. Recipe Name:", recipeName, numberCount); // New line for debugging
            document.getElementById("selectedRecipe").value = recipeName;
            document.getElementById("selectedNumber").value = numberCount;
            let form = document.querySelector('form');
            form.requestSubmit();
        }
    </script>
{% endblock %}
